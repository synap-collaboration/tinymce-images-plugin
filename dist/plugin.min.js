'use strict';function initPlugin(){var a=function(a,b){var c=a.dom.create('img',{id:'tinymce-new-image-'+b.name});a.selection.setNode(c);var d=new FileReader;d.readAsDataURL(b),d.onload=function(){var c=d.result,e=a.dom.select('*[id="tinymce-new-image-'+b.name+'"]')[0];e.setAttribute('src',c);var f=a.getParam('images_upload_handler');f(b,function(c){var d=a.dom.select('*[id="tinymce-new-image-'+b.name+'"]')[0];d&&(d.setAttribute('src',c),d.removeAttribute('id'))},function(){alert('Upload failed')})}};tinymce.create('tinymce.plugins.SynapImages',{init:function c(b){b.addButton('upload-button',{icon:'image',tooltip:'Insert an image',onClick:function d(){var c=document.createElement('input');c.setAttribute('type','file'),c.setAttribute('accept','image/*'),c.onchange=function(c){c.preventDefault();var d=c.target.files;d.length&&a(b,d[0])},c.click()}})},getInfo:function a(){return{longname:'synap-images',author:'Jesse Cooper',version:tinymce.majorVersion+'.'+tinymce.minorVersion}}}),tinymce.PluginManager.add('synap-images',tinymce.plugins.SynapImages)}initPlugin();
