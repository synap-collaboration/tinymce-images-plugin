'use strict';function initPlugin(){var a=function(a,b){var c=a.dom.create('img',{id:'tinymce-new-image-'+b.name});!c&&Honeybadger&&Honeybadger.notify({desc:'Could not create img tag',fileObj:b}),a.selection.setNode(c);var d=new FileReader;d.readAsDataURL(b),d.onload=function(){var c=d.result,e=a.dom.select('*[id="tinymce-new-image-'+b.name+'"]')[0];!e&&Honeybadger&&Honeybadger.notify({desc:'Could not find img after reading base64 data',fileObj:b}),e.setAttribute('src',c);var f=a.getParam('images_upload_handler');f(b,function(c){var d=a.dom.select('*[id="tinymce-new-image-'+b.name+'"]')[0];return d&&(d.setAttribute('src',c),d.removeAttribute('id')),a.getContent()},function(){a.dom.remove('*[id="tinymce-new-image-'+b.name+'"]'),a.getParam('image_conversion_error_handler')()})},d.onerror=function(){d.abort(),console.error('Failed to read base64 image data'),Honeybadger&&Honeybadger.notify({desc:'Failed to read base64 image data',fileObj:b}),a.dom.remove('*[id="tinymce-new-image-'+b.name+'"]'),a.getParam('image_conversion_error_handler')()}};tinymce.create('tinymce.plugins.SynapImages',{init:function c(b){b.addButton('upload-button',{icon:'image',tooltip:'Insert an image',onClick:function d(){var c=document.createElement('input');c.setAttribute('type','file'),c.setAttribute('accept','image/*'),c.onclick=function(){this.value=null},c.onchange=function(c){c.preventDefault();var d=c.target.files;d.length&&0<d.length&&a(b,d[0])},c.click()}})},getInfo:function a(){return{longname:'synap-images',author:'Jesse Cooper',version:tinymce.majorVersion+'.'+tinymce.minorVersion}}}),tinymce.PluginManager.add('synap-images',tinymce.plugins.SynapImages)}initPlugin();
